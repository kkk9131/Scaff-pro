# 画面構成設計（MVP）

このドキュメントは、足場SaaSツールの MVP における画面構成と主要コンポーネントを整理したものです。

---

## 1. 画面一覧

1. 案件一覧画面（Screen A）  
2. 足場計画画面（Screen B）  
   - この画面で、図面確認・外周編集・条件設定・自動割付・手動修正・3D / 数量確認までを完結させる。

---

## 2. Screen A: 案件一覧画面

### 2.1 目的

- 既存案件の一覧・検索・削除。  
- 新規案件の作成と、足場計画画面への遷移。

### 2.2 構成要素

- ヘッダー  
  - ロゴ / タイトル（任意）  
  - ユーザー名（将来のマルチユーザー対応を想定）
- 案件リスト  
  - 列例：  
    - 案件名  
    - 住所（任意）  
    - 作成日  
    - 更新日  
    - ステータス（作業中 / 完了など）  
  - 行クリックで Screen B（足場計画画面）へ遷移。
- アクションボタン  
  - 「新規案件作成」  
  - 「削除」  
  - （MVP ではコピー不要）

---

## 3. Screen B: 足場計画画面（メイン画面）

### 3.1 目的

- 1 つの画面内で、以下の作業を完結させる。  
  - 図面表示・確認  
  - 外周ポリライン設定  
  - 高さ・足場条件の設定  
  - 自動割付・手動修正・AI 修正  
  - 3D 確認  
  - 数量確認・出力

### 3.2 レイアウト概要

- 中央：大キャンバスエリア  
- 左：ツールパレット（簡易）  
- 右：サイドパネル（タブ切替）  
- 上部：案件名・図面タブ（平面 / 立面 / 足場 / 3D 表示切替）

### 3.3 中央：キャンバスエリア

- 表示タブ（上部）  
  - 「建物平面」  
    - 背景に平面図（PDF / 画像 / DXF）を表示。  
    - 外周ポリライン・開口線・足場支柱位置などを上からオーバーレイ。  
  - 「建物立面」（将来拡張）  
    - 背景に立面図を表示し、高さ確認用に利用。  
  - 「足場平面」  
    - 足場のみ（建物線なし）の配置図表示。  
    - 印刷や PDF 出力対象となるビュー。  
  - 「3D」  
    - 建物ワイヤーフレーム＋足場ワイヤーフレームの 3D 表示。

### 3.4 左：ツールパレット

- モード切替ボタン  
  - 選択 / 移動モード  
  - 外周編集モード（頂点追加・削除・移動）  
  - 開口線指定モード  
  - 将来：投げ縄選択モード
- 表示補助  
  - グリッド ON/OFF  
  - スナップ ON/OFF（直角・グリッド）

### 3.5 右：サイドパネル（タブ）

#### 3.5.1 「建物・図面」タブ

- 図面情報  
  - アップロード済みファイル一覧（平面図 / 立面図）。  
  - スケール設定（現在のスケール値、再設定ボタン）。
- 外周情報  
  - 外周ポリラインの頂点一覧（座標リスト）。  
  - 外周形状の検証（直角であるかのチェック結果）。  
- 高さ条件  
  - 階数  
  - 各階の床レベル  
  - 軒高・屋根最高高さ  
  - 線ごとの高さ上書き（下屋 / バルコニー用）

#### 3.5.2 「足場条件」タブ

- テンプレ選択  
  - 使用する足場仕様テンプレート（例：標準住宅用 1、2 等）。
- 基本条件  
  - 標準スパン（水平ピッチ）  
  - 階高ピッチ（垂直ピッチ）  
  - 控えの条件（何スパンごと、どの面で必須など）  
  - 最上段作業床高さの許容差（軒高との差分）
- 面別条件（必要に応じて）  
  - 南面のみスパン変更  
  - バルコニー前は特別条件 など

#### 3.5.3 「数量」タブ

- 数量表  
  - 部材種別 × 規格長さ × 面別（南 / 東 / 西 / 北）＋建物全体合計のテーブル。  
  - 列例：部材種別／規格長さ／面／数量／単位／備考。  
  - CSV / Excel ダウンロードボタン。

#### 3.5.4 「チャット」タブ

- AI エージェントとの対話エリア  
  - ユーザー入力欄（テキスト）。  
  - 応答表示（ツール呼び出し内容や変更内容を含む）。  
  - 代表的な指示  
    - 「南面の足場をもう少し縮めて」  
    - 「スパンの間をもう少し広げて」  
    - 「ここは開口なので、スパンをずらして 1800 にしてほしい」  
    - 「高さをもう少し上げたい／下げたい」
- 将来：よく使う指示をボタンとしてプリセット化。

#### 3.5.5 （将来）「履歴」タブ

- 操作履歴一覧  
  - 自動割付実行時の条件スナップショット  
  - 手動修正の差分  
  - チャット経由の変更内容  
- 「この時点に戻す」などのロールバック機能（将来検討）。

---

## 4. 画面間遷移

- 起動 → Screen A（案件一覧）  
  - 「新規案件作成」 → 新規案件レコードを作成 → Screen B へ遷移（図面未アップ状態）。  
  - 案件行クリック → 対象案件の Screen B へ遷移。  
  - 削除は同画面内で完結。
- Screen B から Screen A へ戻る  
  - 画面上部の「一覧へ戻る」ボタンなど。

---

## 5. MVP フェーズでの簡略化

- 立面図タブは「高さ確認用表示のみ」からスタートし、立面足場展開図の描画は次フェーズ。  
- 履歴タブはログ保存のみ先行し、UI からのロールバックは後回しでもよい。  
- チャット機能は最初はテキストのやり取り＋最小限のツール呼び出しから開始し、  
  プリセットボタンや複雑な指示は拡張フェーズで実装する。


